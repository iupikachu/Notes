



## 前端知识笔记

### 1.css





#### 1.1.  css.层次选择器

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201023144040578.png" alt="image-20201023144040578" style="zoom:50%;" />

```html
<body>

<p>p1</p>
<p>p2</p>
<p>p3</p>
<ul>
    <li>
        <p>p4</p>
    </li>
    <li>
        <p>p5</p>
    </li>
    <li>
        <p>p6</p>
    </li>
</ul>
</body>
```

1.后代选择器   在某个元素的后面  “祖爷爷 爷爷 爸爸 你

```css
   <!--后代选择器-->
        body p{
           background: yellow;
       }
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201023145020009.png" alt="image-20201023145020009" style="zoom:50%;" />

2.子选择器 一代 儿子

```css
/* 子选择器*/
body>p{
    background: chocolate;
}
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201023145052656.png" alt="image-20201023145052656" style="zoom:50%;" />

3.弟弟选择器  同辈 《弟弟选择器》

aqua:![image-20201023145613856](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201023145613856.png)

```css
 .active +p{
           background: aqua;
       }

<p class="active">p7</p>
<p>p8</p>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201023145539759.png" alt="image-20201023145539759" style="zoom:50%;" />

4.通用选择器  选择的下面所有的兄弟

```css
.active~p{
           background: green;
       }

<p>p0</p>
<p class="active">p1</p>
<p>p2</p>
<p>p3</p>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201023145949450.png" alt="image-20201023145949450" style="zoom:50%;" />



#### 1.2.  css.结构伪类选择器

```html
<body>

<p>p1</p>
<p>p2</p>
<p>p3</p>
<ul>
    <li>li1</li>
    <li>li2</li>
    <li>li3</li>
</ul>
</body>
```





```css
<!--避免使用 class id 选择器-->
<style>

    ul li:first-child{
        background: green;
}
    ul li:last-child{
        background: red;
    }
</style>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201023154228769.png" alt="image-20201023154228769" style="zoom:50%;" />





#### 属性选择器



```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .demo a{
            float:left;
            display: block;
            height: 50px;
            width: 50px;
            border-radius: 10px;
            background: cornflowerblue;
            color: chocolate;
            text-decoration: none;
            text-align: center;
            margin-right: 5px;
            font:bold 20px/50px Arial;  /*字体大小/行高*/
        }

        /*   1.选中存在id属性的元素   a[]{}   */
        a[id=first]{
            background: yellow;
        }
        /* 2.class中有links的元素   */
        a[class*="links"]{
            background: yellow;
        }
        /* 3.选中href以http开头的元素 */
        a[href^=http]{
            background: red;
        }
        /* 4.以pdf结尾的元素 */
        a[href$=pdf]{
            background: aqua;
        }

    </style>
</head>
<body>
     <p class="demo">
         <a href="http:www.baidu.com" class="links item first" id="first">1</a>
         <a href="http:www.123.com" class="links item active" target="_blank" title="test" id="second">2</a>
         <a href="images/123.html" class="links item">3</a>
         <a href="images/123.png" class="links item">4</a>
         <a href="images/123.jpg" class="links item">5</a>
         <a href="abc" class="links item" >6</a>
         <a href="/a.pdf" class="links item">7</a>
         <a href="abc.pdf" class="links item">8</a>
         <a href="abc.doc" class="links item">9</a>
         <a href="abcd.doc" class="links item last">10</a>
     </p>

</body>
</html>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201026214126758.png" alt="image-20201026214126758" style="zoom:50%;" />



### 2.美化网页元素





#### 2.1字体样式

span标签： 重点要突出的字

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<body>

   欢迎学习<span id="title">java</span>


</body>
</html>
```

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<style>
    body{
        font-family: "Andale Mono" ,楷体;
        color: burlywood;
    }
    h1{
        font-size: 50px;
    }
    .p1{
        font-weight: bold;
    }
</style>

<body>
<h1>故事介绍</h1>
<p class="p1">
    江湖是一张珠帘。大人物小人物，是珠子，大故事小故事，是串线。情义二字，则是那些珠子的精气神。开始收官中。最终章将以那一声“小二上酒”结尾。
</p>
<p>
    武器：绣冬、春雷。玄甲、青梅、竹马、朝露、春水、桃花、峨眉、朱雀、黄桐、蚍蜉、金缕、太阿；春秋剑；三千红       丝；过河卒。
</p>
<p>
       When I wake up in the morning，

    　　You are all I see;

    　　When I think about you，

    　　And how happy you make me。

    　　You're everything I wanted;

    　　You're everything I need;

    　　I look at you and know;

    　　That you are all to me。

    　　Barry Fitzpatrick
</p>
</body>
</html>
```



#### 2.2 文本样式

1.颜色

2.文本对齐方式

3.首行缩进

4.行高

5.装饰

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<!--
    text-align：排版 居中
    text-indent: 段落首行缩进
    line-height 行高 和 height 块的高度一致就可以上下居中
    text-decoration 文本划线  none 去下划线
-->
<style>
    h1{
        color: rgba(0,255,255,0.65);
        text-align: center;
    }
    .p1{
        text-indent: 2em;
    }
    .p3{
        background: burlywood;
        height:300px;
        line-height: 300px;
    }
</style>

<body>
<h1>故事介绍</h1>
<p class="p1">
    江湖是一张珠帘。大人物小人物，是珠子，大故事小故事，是串线。情义二字，则是那些珠子的精气神。开始收官中。最终章将以那一声“小二上酒”结尾。

</p>
<p>
    武器：绣冬、春雷。玄甲、青梅、竹马、朝露、春水、桃花、峨眉、朱雀、黄桐、蚍蜉、金缕、太阿；春秋剑；三千红丝；过河卒。
</p>
<p class="p3">
       When I wake up in the morning，<br>
    　　You are all I see;<br>
</p>
</body>
</html>
```





```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<!--
    水平对齐  相对的 要选中两个img和span
-->

<style>
    img,span{
        vertical-align: middle;
    }
</style>

<p>
    <img src="img/a.jpg"alt="">
     <span>weqwerqwr</span>
</p>

</body>
</html>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201027104230594.png" alt="image-20201027104230594" style="zoom:50%;" />





### 3.vue



#### 3.1 背景知识



![image-20201029212410566](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201029212410566.png)





![image-20201125133338044](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201125133338044.png)

​      

**vue中mvvm的划分**

* 被控制的区域 View
* Vue实例对象  View Model
* 实例对象中的data  Model





<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201029214039153.png" alt="image-20201029214039153" style="zoom:50%;" />

**前端可以脱离后端独立运行**



<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201029214230221.png" alt="image-20201029214230221" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201029214309614.png" alt="image-20201029214309614" style="zoom:50%;" />



<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201029214415700.png" alt="image-20201029214415700" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030085336481.png" alt="image-20201030085336481" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030092428596.png" alt="image-20201030092428596" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030092525716.png" alt="image-20201030092525716" style="zoom:50%;" />



个人理解：v-for 直接取data里面的数据





```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title> 
    <!--导入vue.js    -->
    <!--     <script>"https://cdn.jsdelivr.net/npm/vue@2.5.21/dist/vue.min.js"</script>-->
    <script type="text/javascript" src="https://unpkg.com/vue"></script>
</head>
<body>
      <!--view-->
      <div id="app">
           {{message}}
      </div>  
     <script>
         <!--viewMod-->
         var vm=new Vue({
             el: "#app",
             data:{
                 message:"hello vue!"
             }
         });

     </script>
</body>
</html>
```



####  3.2 v-bind

专门给元素的属性绑定数据

语法

v-bind：=

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!--导入vue.js    -->
    <!--     <script>"https://cdn.jsdelivr.net/npm/vue@2.5.21/dist/vue.min.js"</script>-->
    <script type="text/javascript" src="https://unpkg.com/vue"></script>
</head>
<body>
      <!--view-->
      <div id="app">
          <span v-bind:title="message"> 鼠标悬停几秒查看动态绑定选项
          </span>

      </div>
     <script>
         <!--viewMod-->
         var vm=new Vue({
             el: "#app",
             data:{
                 message:"hello vue!"
             }
         });

     </script>
</body>
</html>
```



![image-20201030093558804](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030093558804.png)



#### 3.3 v-if



```html
 <!--view-->
 <div id="app">
     <h1 v-if="ok==true">yes</h1>
     <h1 v-else>no</h1>
 </div>
<script>
    <!--viewMod-->
    var vm=new Vue({
        el: "#app",
        data: {
            ok: true
        }
    });
</script>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030094340966.png" alt="image-20201030094340966" style="zoom:50%;" />

#### 3.4 v-for

数组 [ ]

对象 { }



```html
 <!--view-->
 <div id="app">
         <li v-for="item in items">
             {{item.message}}
         </li>
 </div>
<script>
    <!--viewMod-->
    var vm=new Vue({
        el: "#app",
        data: {
            items: [
                {message: 'cqp'},
                {message: 'iu'},
                {message:'pikachu'}
            ]
        }
    });
</script>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030095358933.png" alt="image-20201030095358933" style="zoom:50%;" />

#### 3.5 事件

v-on    可以简写成@

```html
 <!--view-->
 <div id="app">
     <button v-on:click="sayHello">click me!</button>
 </div>
<script>
    <!--viewMod-->
    var vm=new Vue({
        el: "#app",
        data: {
            message: "hello world"
        },
        methods: {
            sayHello: function () {
                 alert(this.message)
            }
        }
    });
</script>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030100627274.png" alt="image-20201030100627274" style="zoom:50%;" />

#### 3.6 数据双向绑定

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030101246080.png" alt="image-20201030101246080" style="zoom:50%;" />





**v-model**

v-model    input标签绑定的是value属性    select标签绑定的是selected属性  不同标签v-model绑定的东西不一样

```html
 <!--view-->
 <div id="app">
    输入的文本:<input type="text" v-model="message">{{message}}
 </div>
<script>
    <!--viewMod-->
    var vm=new Vue({
        el: "#app",
        data: {
            message: ""
        },
    });
</script>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030102027543.png" alt="image-20201030102027543" style="zoom:50%;" />



```html
 <!--view-->
 <div id="app">
     <input v-model="test">{{test}}

     <select v-model="testt">
         <option value="" disabled>--请选择--</option>
         <option value="a被选">a</option>
         <option value="b被选">b</option>
         <option value="c被选">c</option>
     </select>
     {{testt}}
 </div>
<script>
    <!--viewMod-->
    var vm=new Vue({
        el: "#app",
        data: {
            message: "",
            test: '这是测试',
            testt:''
        },

    });
</script>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030105416573.png" alt="image-20201030105416573" style="zoom:50%;" />



​           <option value="" disabled>--请选择--</option>

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030110110347.png" alt="image-20201030110110347" style="zoom:50%;" />



#### 3.7 vue组件



<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030110528454.png" alt="image-20201030110528454" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030110340313.png" alt="image-20201030110340313" style="zoom:50%;" />

```html
 <div id="app">
     <cqp></cqp>
 </div>
<script>
    <!--定义模板-->
    Vue.component(
         "cqp",{template:'<li>\n' +
                '    <ul>chen</ul>\n' +
                '    <ul>qi</ul>\n' +
                '    <ul>peng</ul>\n' +
                '</li>'}
    );
    var vm=new Vue({
        el: "#app",
        data: {
            message: "",

        },
    });
</script>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030111606236.png" alt="image-20201030111606236" style="zoom:50%;" />





循环的在component里面输出数据





```html
 <div id="app">
     <cqp v-for="item in items" v-bind:chen="item"></cqp>
 </div>
<script>

    Vue.component(

        "cqp",{
            props: ['chen'],
            template: '<li>{{chen}}</li>>'
        }
    );

    var vm=new Vue({
        el: "#app",
        data: {
            message: "",
            items: ["java","python","php","c++"]
        },
    });
</script>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030124731686.png" alt="image-20201030124731686" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030132938606.png" alt="image-20201030132938606" style="zoom:50%;" />



data里面存数据，之后应该是从数据库拿，<cqp>组件v-for逐个拿出数据放到item里，但是组件是看不到item的，v-bind绑定<cqp>里的item把chen作为变量抛出，组件conponent里面通过props来接收chen。模板里就可以用chen了。



#### 3.8 网络通信  **ajax**





<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030154554290.png" alt="image-20201030154554290" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030154611735.png" alt="image-20201030154611735" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030154644789.png" alt="image-20201030154644789" style="zoom:50%;" />



来个例子，易于理解。

例子1

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030154725399.png" alt="image-20201030154725399" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030155403911.png" alt="image-20201030155403911" style="zoom:50%;" />







<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030162056573.png" alt="image-20201030162056573" style="zoom:50%;" />





<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030162148405.png" alt="image-20201030162148405" style="zoom:50%;" />





例子2  后端返回字符串



<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030163427647.png" alt="image-20201030163427647" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030164603410.png" alt="image-20201030164603410" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030165026114.png" alt="image-20201030165026114" style="zoom:50%;" />



例子3 登录注册



<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030165453047.png" alt="image-20201030165453047" style="zoom:50%;" />



<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030170117620.png" alt="image-20201030170117620" style="zoom:50%;" /> 





<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030170050535.png" alt="image-20201030170050535" style="zoom:50%;" />











<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201030170002046.png" alt="image-20201030170002046" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201031123127170.png" alt="image-20201031123127170" style="zoom:50%;" />

#### 3.9  网络通信 axios

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201031132455315.png" alt="image-20201031132455315" style="zoom:50%;" />



例子：

data.json

```json
{
  "name":"chenqipeng皮卡丘",
  "url": "http://baidu.com",
  "page": "1",
  "isNonProfit":"true",
  "address": {
    "street": "含光门",
    "city":"陕西西安",
    "country": "中国"
  },
  "links": [
    {
      "name": "B站",
      "url": "https://www.bilibili.com/"
    },
    {
      "name": "4399",
      "url": "https://www.4399.com/"
    },
    {
      "name": "百度",
      "url": "https://www.baidu.com/"
    }
  ]
}
```



```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>

<div id="app">
      {{info.name}}
      {{info.address.city}}
    <a v-bind:href="info.url">click</a>
</div>

<script>
    var vm=new Vue({
        el: "#app",
        data(){
            return{
                //请求的返回参数格式，必须和json字符串一样
                info:{
                    name: null,
                    address: {
                        street: null,
                        city: null,
                        country: null
                    },
                    url: null
                }

            }
        },
        mounted(){ //钩子函数 链式编程  ES6新特性
             axios.get('data.json').then(response=>(this.info=response.data))
        }
    });
</script>

</body>
</html>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201031151813519.png" alt="image-20201031151813519" style="zoom:100%;" />

直接 info：null更方便

```js
<script>
    var vm=new Vue({
        el: "#app",
        data(){
            return{
                info:null
            }
        },
        mounted(){ //钩子函数 链式编程  ES6新特性
             axios.get('data.json').then(response=>(this.info=response.data))
        }
    });
</script>
```



#### 3.10 计算属性



计算属性：计算出来的结果，保存在属性中  内存中运行 虚拟dom 

计算属性可以想象为缓存



例子

```html
<div id="app">
      <p>{{currenTime1()}}</p>
      <p>{{currenTime2}}</p>
</div>

<script type="text/javascript" src="https://unpkg.com/vue"></script>

<script>

    var vm=new Vue({
        el: "#app",

        methods:{
            currenTime1: function (){
                return Date.now(); //返回一个时间戳
            }
        },
        computed:{     //methods computed 方法名不能重名 重名后只能调用methods
            currenTime2: function (){
                return Date.now();
            }
        }

    });
</script>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201031155925638.png" alt="image-20201031155925638" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201031160935172.png" alt="image-20201031160935172" style="zoom:50%;" />





#### 3.11 slot 插槽



插槽就是子组件中的提供给父组件使用的一个占位符，用<slot></slot> 表示，父组件可以在这个占位符中填充任何模板代码，如 HTML、组件等，填充的内容会替换子组件的<slot></slot>标签。

vue中 把<slot> 作为承载分发内容的出口 应用在组合组件的场景中



```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="app">
        <todo>
                <todo-title></todo-title>
                <todo-items></todo-items>
        </todo>
</div>
<!--<script>"https://cdn.jsdelivr.net/npm/vue@2.5.21/dist/vue.min.js"</script>-->
<script type="text/javascript" src="https://unpkg.com/vue"></script>
<script>
    Vue.component("todo",{
        template:  '<div>a\
                    <slot></slot>\
                    <ul>\
                    <slot></slot>\
                    </ul>\
                    b</div>'
    });

    Vue.component("todo-title",{
         template: '<div>标题</div>'
    });
    Vue.component("todo-items",{
         template:'<li>java</li>'
    });

    var vm = new Vue({
         el: "#app"
        });
</script>


</body>
</html>
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201108112522802.png" alt="image-20201108112522802" style="zoom:50%;" />

循环data中的数据

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="app">
        <todo>
                <todo-title slot="todo-title" v-bind:title="title"></todo-title>
                <todo-items slot="todo-items" v-for="item in todoItems" v-bind:items="item"></todo-items>
        </todo>
</div>
<script type="text/javascript" src="https://unpkg.com/vue"></script>
<script>
    Vue.component("todo",{
        template:  '<div>a\
                    <slot name="todo-title"></slot>\
                    <ul>\
                    <slot name="todo-items"></slot>\
                    </ul>\
                    b</div>'
    });

    Vue.component("todo-title",{
         props: ['title'],
         template: '<div>{{title}}</div>'
    });
    Vue.component("todo-items",{
         props: ['items'],
         template: '<li>{{items}}</li>'
    });

    var vm = new Vue({
         el: "#app",
         data:{
              title:'cqp的学习任务',
              todoItems:['java','redis','mysql']
         }
        });
</script>

</body>
</html>
```

v-bind:当前控件的属性=data里的数据属性

用slot 和 name来指定哪一个组件插入哪一个插槽



#### 3.12 自定义事件内容分发



如果给每个item加一个删除按钮 那么如何根据删除按钮去删除vue的data里面的数据？



```html
Vue.component("todo-items",{
     props: ['items'],
     template: '<li>{{items}}<button @click="remove">删除</button></li>',
     methods: {
        remove: function () {
            alert("删除了!")
        }
    }
});
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201108154753615.png" alt="image-20201108154753615" style="zoom:50%;" />

当前组件绑定当前事件很正常。但是如何做到绑定vue的data里面的数据？



v-on自定义一个事件（diy_remove） 这里的v-on可以绑到vue的实例。

组件template里面的v-on绑到组件自己里面的实例。

组件的click事件只能绑定组件里面的方法。

所以在组件的方法里面用 this.$emit()去绑定前端的diy_remove。



```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="app">
        <todo>
                <todo-title slot="todo-title" v-bind:title="title"></todo-title>
                <todo-items slot="todo-items" v-for="(item,index) in todoItems"
                            v-bind:items="item" v-bind:index="index" 
                            v-on:diy_remove="removeItems(index)"></todo-items>
        </todo>
</div>
<script>"https://cdn.jsdelivr.net/npm/vue@2.5.21/dist/vue.min.js"</script>
<script type="text/javascript" src="https://unpkg.com/vue"></script>
<script>
    Vue.component("todo",{
        template:  '<div>a\
                    <slot name="todo-title"></slot>\
                    <ul>\
                    <slot name="todo-items"></slot>\
                    </ul>\
                    b</div>'
    });

    Vue.component("todo-title",{
         props: ['title'],
         template: '<div>{{title}}</div>'
    });
    Vue.component("todo-items",{
         props: ['items','index'],
         template: '<li>{{index}}----{{items}}<button @click="remove">删除</button></li>',
         methods: {
            remove: function (index) {
                //alert("删除了!")
                this.$emit('diy_remove',index)
            }
        }
    });

    var vm = new Vue({
         el: "#app",
         data:{
              title:'cqp的学习任务',
              todoItems:['java','redis','mysql']
         },
         methods: {
                removeItems:function (index){
                     console.log("删除了"+this.todoItems[index]+"ok")
                     this.todoItems.splice(index,1);//一次删除一个元素
                }
         }

        });
</script>

</body>
</html>
```



#### 3.13 vue-cli

用node进行环境搭建

脚手架  



<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201110104051249.png" alt="image-20201110104051249" style="zoom:50%;" />



vue基于es6 但是很多网站基于es5 所以用webpack进行打包降级





初始化vue-cli        

>  vue init webpack myvue

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201110105857032.png" alt="image-20201110105857032" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201110110105217.png" alt="image-20201110110105217" style="zoom:50%;" />

![image-20201110111815900](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201110111815900.png)



npm run dev 启动项目

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201110130202481.png" alt="image-20201110130202481" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201110130246570.png" alt="image-20201110130246570" style="zoom:50%;" />



#### 3.14 webpack

现代javascript应用模块静态打包器。能把各种资源，如js，jsx，es6，sass，图片等都作为模块来处理和使用。

把 es6规范的代码打包成es5规范。



在项目文件中下载webpack

> sudo npm install webpack -g
>
>sudo npm install webpack-cli -g

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111140654042.png" alt="image-20201111140654042" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111140909846.png" alt="image-20201111140909846" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111141009702.png" alt="image-20201111141009702" style="zoom:50%;" />



webpack 安装成功

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111141251975.png" alt="image-20201111141251975" style="zoom:50%;" />



使用webpack



* 新建项目

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111141746127.png" alt="image-20201111141746127" style="zoom:50%;" />

* 创建modules目录 放置js等资源

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111143013534.png" alt="image-20201111143013534" style="zoom:50%;" />



hello.js

```js
//暴露一个方法
exports.sayHi = function () {
    document.write("<h1>cqp学前端</h1>")
};
exports.sayHi2 = function () {
    document.write("<h1>cqp学前端2</h1>")
};
exports.sayHi3 = function () {
    document.write("<h1>cqp学前端3</h1>")
};
```



main.js

```js
var hello = require("./hello");
hello.sayHi();
```

webpack.config.js

```js
module.exports = {
    entry: './modules/main.js' ,
    output: {
        filename: "./js/bundle.js"
    }
}
```

  entry 程序入口

output： 输出



然后在  terminal里  webpack打包一下



<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111143342861.png" alt="image-20201111143342861" style="zoom:50%;" />



<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111143434291.png" alt="image-20201111143434291" style="zoom:50%;" />

然后写个index.html 用刚刚生成的包

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111143719548.png" alt="image-20201111143719548" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111143741117.png" alt="image-20201111143741117" style="zoom:50%;" />



现在知道为什么vue只有一个主入口了。

因为前端工程化了，不需要那么多页面了，都是一个个js组件和vue组件，组件一拼前端一引。这就是前端的模块化开发。

webpack就是一个打包工具。

打包完后可以用 

> webpack --watch   继续监听  修改了js可以动态打包    可以实现热部署

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111144344051.png" alt="image-20201111144344051" style="zoom:50%;" />



> ctrl + c 停止 







#### 3.15 vue-route  路由



vue-route是vue官方的路由管理器。功能如下：

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111145959768.png" alt="image-20201111145959768" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111150128026.png" alt="image-20201111150128026" style="zoom:100%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111153916001.png" alt="image-20201111153916001" style="zoom:100%;" />





<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111154442960.png" alt="image-20201111154442960" style="zoom:50%;" />

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111154454632.png" alt="image-20201111154454632" style="zoom:50%;" />

 npm run dev 后可以动态更新

后续配置router。。。。。。





#### 3.16 Vue+ElementUi



从头开始搭建elementui+vue的项目

1. vue 初始化一个 webpack项目  

> vue init webpack hello-vue

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111203228250.png" alt="image-20201111203228250" style="zoom:50%;" />

2.安装插件

>cd hello-vue     进入目录
>
>npm install vue-router --save -dev      安装vue-router
>
>npm i element-ui  -s       安装element-ui
>
>npm install   安装其他的依赖
>
>cnpm install  sass-loader node-sass --save-dev  安装sass加载器
>
>npm run dev    启动测试

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111203908931.png" alt="image-20201111203908931" style="zoom:50%;" />







<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111205046657.png" alt="image-20201111205046657" style="zoom:50%;" />



3.用idea打开 删掉不要的helloworld

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201111215131701.png" alt="image-20201111215131701" style="zoom:50%;" />

干净的组件了！





4. src下新建 router 文件夹和 views 文件夹

​       views文件夹下新建Main.vue 的组件作为首页

​       views文件夹下新建Login.vue 的组件作为登录页面 放入elementui组件

```js
<template>
  <div>
    <el-form ref="loginForm" :model="form" :rules="rules" label-width="80px" class="login-box">
      <h3 class="login-title">欢迎登录</h3>
      <el-form-item label="账号" prop="username">
        <el-input type="text" placeholder="请输入账号" v-model="form.username"/>
      </el-form-item>
      <el-form-item label="密码" prop="password">
        <el-input type="password" placeholder="请输入密码" v-model="form.password"/>
      </el-form-item>
      <el-form-item>
        <el-button type="primary" v-on:click="onSubmit('loginForm')">登录</el-button>
      </el-form-item>
    </el-form>

    <el-dialog
      title="温馨提示"
      :visible.sync="dialogVisible"
      width="30%"
      :before-close="handleClose">
      <span>请输入账号和密码</span>
      <span slot="footer" class="dialog-footer">
        <el-button type="primary" @click="dialogVisible = false">确 定</el-button>
      </span>
    </el-dialog>
  </div>

</template>

<script>
export  default {
  name:"Login",
  data(){
    return {
      form:{
        username: '',
        password: ''
      },
      //表单验证，需要再el-form-item 元素中增加prop属性
      rules:{
        username:[
            {required:true,message:'账号不能为空',trigger:'blur'}
          ],
    password:[
    {required: true,message: '密码不能为空',trigger:'blur'}
          ]
  },
    //对话框显示和隐藏
    dialogVisible:false
  }
  },
  methods:{
    onSubmit(formName) {
      //为表单绑定验证功能
      this.$refs[formName].validate((valid) =>{
        if (valid){
          //使用 vue-router路由到指定页面，该方式称之为编程式导航
          this.$router.push("/main");
        } else {
          this.dialogVisible = true;
          return false;
        }
      });
    }
  }
}
</script>

<style lang="scss" scoped>
.login-box{
  border: 1px solid #DCDFE6;
  width: 350px;
  margin:180px auto;
  padding:35px 35px 15px 35px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  box-shadow:0 0 25px #909399;
}

.login-title{
  text-align:center;
  margin:0 auto 40px auto;
  color:#303133;
}
</style>
```

5.写 router的 index.js文件

```js
import Vue from 'vue'
import Router from 'vue-router'

import Main from "../views/Main";
import Login from "../views/Login";
Vue.use(Router);

export default new Router({
    routes:[
      {
        path: '/main',
        component: Main
      },
      {
        path: '/login',
        component: Login
      }
    ]
});
```



6.编写main.js文件

```js
import Vue from 'vue'
import App from './App'

import router from './router'
import ElementUI from 'element-ui'
import 'element-ui/lib/theme-chalk/index.css'

Vue.use(router);
Vue.use(ElementUI);



/* eslint-disable no-new */
new Vue({
  el: '#app',
  router,
  render: h => h(App) //ElementUI
});
```

app.vue

```js
<template>
  <div id="app">
    <router-view></router-view>
  </div>
</template>

<script>


export default {
  name: 'App',

}
</script>
```

ok

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201112104147440.png" alt="image-20201112104147440" style="zoom:50%;" />





#### 3.17 嵌套路由

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201112104555202.png" alt="image-20201112104555202" style="zoom:50%;" />







### 4.模板代码   （李南江老师）

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
       <p>{{name}}</p>
       <input type="text" v-model="msg">
       <p v-show="age>=18">成年</p>
       <p v-show="age<18">未成年</p>
       <ul>
           <li v-for="(value,index) in list">{{index}}---{{value}}</li>
           <li v-for="(value,key) in obj">{{key}}---{{value}}</li>
       </ul>


   </div>
<script>
    let vue =new Vue({
        el: '#app',
        data: {
            name: "cqp",
            msg:"hello world",
            age:"14",

            list:["张三","李四","王五","赵六"],
            obj:{
                name :"cqp",
                gender:"男",
                age:"24"

            }
        }
    });
</script>
</body>
</html>
```

![image-20201125153416969](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201125153416969.png)

___



```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
       <p>{{name}}</p>
       <p v-text="name"></p>
       <p v-html="name"></p>

       <input type="text" value="{{name}}">
       <input type="text" v-model="name">
       <input type="text" v-bind:value="name">

   </div>
<script>
    let vue =new Vue({
        el: '#app',
        data: {
            name: "cqp"
        }
    });
</script>
</body>
</html>
```



![image-20201125154444505](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201125154444505.png)



> v-bind 绑定类名       可以从服务端动态绑定类名

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        .size{
            font-size: 100px;
        }
        .color{
            color: red;
        }
        .active{
            background: skyblue;
        }
    </style>
</head>
<body>
   <div id="app">
       <p class="size color active">我是段落1</p>
       <p :class="['size','color','active']">我是段落2</p>
       <!-- 通过v-bind 绑定类名 那么在绑定时可以编写一个三目运算符来实现按需绑定     -->
       <p :class="['size','color',flag ?'active':'']">我是段落3</p>
       <p :class="obj">我是段落4</p>
   </div>
<script>
    let vue =new Vue({
        el: '#app',
        data: {
            flag:false,
            obj:{
                'size':true,
                'color':true,
                'active':true
            }
        }
    });
</script>
</body>
</html>
```

![image-20201125160604555](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201125160604555.png)





> 样式绑定    和绑定类名一样，默认情况下v-bind会去Model中查找，找不到所以没效果
>
> ​                   我们需要将样式代码放到对象中赋值给style即可
>
> ​                   但是取值必须用括号括起来
>
> ​                   如果样式中的名称带- 如 fong-size 也必须用引号括起来

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
      <p style="color: red">我是段落1</p>
       <p :style="{color:'red'}">我是段落2 </p>
       <p :style="{color:'red','font-size':'100px'}">我是段落3 </p>
       <p :style="[obj1,obj2]">我是段落4</p>

   </div>
<script>
    let vue =new Vue({
        el: '#app',
        data: {
            obj1:{
                "color":"blue",
                "font-size":"100px"
            },
            obj2:{
                "background-color":"red"
            }
        }
    });
</script>
</body>
</html>`
```

<img src="/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201125163027877.png" alt="image-20201125163027877" style="zoom:50%;" />





> ### v-on  给元素监听事件    v-on:=@



![image-20201125163951373](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201125163951373.png)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
       <button onclick="alert('hello')">我是按钮1</button>
       <button v-on:click="myFn">我是按钮2</button>
       <a href="http://www.baidu.com" v-on:click.prevent="myFn">我是A标签</a>
   </div>
<script>
    let vue =new Vue({
        el: '#app',
        data: {
        methods:{
                myFn(){
                    alert("cqp")
                }
            }
        }
    });
</script>
</body>
</html>
```



**传递参数 事件**



```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
    <button @click="myFn('cqp',33,$event)">我是按钮</button>
   </div>
<script>
    let vue =new Vue({
        el: '#app',
        data: {
            "gender":"男"
        },
        methods:{
            myFn(name,age,e){
                console.log(name,age,e),
                    console.log(this.gender)
            }
        }
    });
</script>
</body>
</html>
```



#### 4.1 按键修饰符

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
       <input type="text" @keyup.enter="myFn">
       <input type="text" @keyup.f2="myFn">
   </div>
<script>
    Vue.congig.keyCodes.f2=113
    let vue =new Vue({
        el: '#app',
        data: {},
        methods:{
            myFn(){
                alert("cqp")
            }
        }
    });
</script>
</body>
</html>
```



#### 4.2 vue自定义全局指令



> directive 方法接受两个参数
>
> 第一个参数:指令的名称
>
> 第二个参数：对象
>
> tips： 在自定义指令的时候，在指定名称的时候，不需要写v-
>
> ​         指令可以在不同的生命周期阶段执行
>
> ​        bind ：指令被绑到元素上的时候执行
>
> ​       inserted：绑定指令的元素被添加到父元素上的时候调用

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">

       <p v-color>我是段落</p>

       实现input框渲染出来的时候被激活 有光标
       钩子函数不能用bind因为bind在元素被渲染之前，要用inserted，在元素被插入到父元素后再调用
       <input type="text" v-focus>

   </div>
<script>

    Vue.directive("color",{
        // 这里的el就是被绑定指令的那个元素  bind钩子函数 被绑定的时候调用
        bind:function (el){
            el.style.color="red";
        }
    });

    Vue.directive("focus",{
        inserted:function (el){
            el.focus();
        }
    });
```



#### 4.2 给自定义指令传参

> 在使用官方指令时可以给指令传参
>
> v-model="name"
>
> 在自定义指令时也可以传参    
>
> 在执行自定义指令对应的方法的时候，除了会传递 el 给我我们，还会传递一个对象给我们。在这个对象中就保存了指令传递过来的参数

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">

       <p v-color="'blue'">我是段落</p>
       <p v-color="curColor">我是段落</p>


   </div>
<script>

    Vue.directive("color",{
        // 这里的el就是被绑定指令的那个元素  bind钩子函数 被绑定的时候调用
        bind:function (el,obj){
            el.style.color=obj.value;
        }
    });


    let vue =new Vue({
        el: '#app',
        data: {
           curColor:'green'
        }
    });
</script>
</body>
</html>
```

![image-20201126145217487](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201126145217487.png)





#### 4.3 自定义局部指令

> 全局指令：在vue实例控制的区域中都可以使用
>
> 局部指令：只能在自定义的那个vue实例中使用
>
> 

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app1">

       <p v-color="'blue'">我是段落1</p>

   </div>

   <div id="app2">

       <p v-color="'red'">我是段落2</p>

   </div>
<script>

    // Vue.directive("color",{
    //     // 这里的el就是被绑定指令的那个元素  bind钩子函数 被绑定的时候调用
    //     bind:function (el,obj){
    //         el.style.color=obj.value;
    //     }
    // });


    let vue1 =new Vue({
        el: '#app1',
        data: {

        }
    });

    let vue2 =new Vue({
        el: '#app2',
        data: {
        },
        //专门用于定义局部指令
        directives:{
            "color":{
            bind:function (el,obj){
                el.style.color = obj.value;
            }}
        }
    });
</script>
</body>
</html>
```

![image-20201126150712050](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201126150712050.png)



#### 4.4 计算属性

> 计算属性和函数的区别
>
>    函数被调用就会执行   计算属性只要返回的结果没有发生变化，那么计算属性就只会被执行一次
>
> 开发中 如果数据经常变化推荐用函数

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
     <P>{{msg.split("").reverse().join("")}}</P>
       <p>{{msg2}}</p>
   </div>
<script>
    let vue =new Vue({
        el: '#app',
        data: {
            msg:"abcdef"
        },
        computed:{
            msg2:function (){
               let res = "abcdef".split("").reverse().join("");
               return res;
            }
        }
    });
</script>
</body>
</html>
```









```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
       <p>{{msg2}}</p>
       <p>{{msg2}}</p>
       <p>{{msg2}}</p>
       <p>{{msg1()}}</p>
       <p>{{msg1()}}</p>
       <p>{{msg1()}}</p>
   </div>
<script>
    let vue =new Vue({
        el: '#app',
        methods:{
            msg1(){
                console.log("msg1函数被执行了")
                let res = "abcdef".split("").reverse().join("");
                return res;
            }
        },
        data: {
            msg:"abcdef"
        },
        computed:{
            msg2:function (){
                console.log("msg2计算属性被执行了")
               let res = "abcdef".split("").reverse().join("");
               return res;
            }
        }
    });
</script>
</body>
</html>
```

![image-20201126152959932](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201126152959932.png)



#### 4.5 自定义全局过滤器

> vue.filter
>
> filter方法接受两个参数
>
> 第一个参数：过滤器名称
>
> 第二个参数：处理数据的函数
>
> 注意点：默认情况下处理数据的函数接收一个参数，就是当前要被处理的数据
>
> {{name| filter}}   vue会把name交给指定的过滤器处理
>
> tips:  只能在插值语法和v-bind中使用
>
> ​        过滤器可以连续使用



#### 4.6 自定义局部过滤器

> 全局过滤器 在任何一个vue实例中都可以使用
>
> 局部过滤器 只能在自定义的那个vue实例中使用



**自定义过滤器练习   格式化时间**

在使用过滤器的时候，可以在过滤器名称后面加上（）

如果给过滤器的名称后面加上了（），那么就可以给过滤器的函数传递参数

```vue
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
       <p>{{time | dateFormart("yyyy-MM-dd")}}</p>
   </div>
<script>
    Vue.filter("dateFormart",function (value,fmStr){
         let date = new Date(value);
         let year = date.getFullYear();
         let month = date.getMonth()+1+"";
         let day = date.getDate()+"";
         let hour = date.getHours()+"";
         let minute = date.getMinutes()+"";
         let second = date.getSeconds()+"";
         if(fmStr && fmStr === "yyyy-MM-dd"){
             return `${year}-${month.padStart(2,"0")}-${day.padStart(2,"0")} `;
         }
         return `${year}-${month.padStart(2,"0")}-${day.padStart(2,"0")} ${hour.padStart(2,"0")}:${minute.padStart(2,"0")}:${second.padStart(2,"0")}`;
    });
    let vue =new Vue({
        el: '#app',
        data: {
            time: Date.now()
        }
    });
```







#### 4.7 练习:   学生管理系统

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        #app{
            width: 800px;
            margin: 50px auto ;
            background: skyblue;
        }
        table {
            width: 100%;
            background: black;
        }
        table tr{
            background: white;
        }
        form{
            width:100%;
            display: flex;
            justify-content: space-between;
        }
    </style>
</head>
<body>
   <div id="app">
       <form v-show="isShow">
           <input type="text" placeholder="请输入序号" v-model="person.id">
           <input type="text" placeholder="请输入名称"v-model="person.name">
           <input type="text" placeholder="请输入分数"v-model="person.score">
           <input type="submit" value="增加" @click.prevent="add">
           <input type="submit" value="查询" @click.prevent="query">

       </form>

       <table>
         <tr>
             <th>序号</th>
             <th>姓名</th>
             <th>分数</th>
             <th>时间</th>
             <th>操作</th>
         </tr>
           <tr v-for="(person,index) in persons">
<!--               <td><input type="text" v-bind:value="person.id" :disabled="isDisabled"></td>-->
<!--               <td><input type="text" v-bind:value="person.name" :disabled="isDisabled"></td>-->
<!--               <td><input type="text" v-bind:value="person.score" :disabled="isDisabled"></td>-->
<!--               <td><input type="text" v-bind:value="person.time | dateFormart" :disabled="isDisabled"></td>-->
<!--               增加双向绑定 时间只需要单向绑定-->
               <td><input type="text" v-model="person.id" :disabled="isDisabled"></td>
               <td><input type="text" v-model="person.name" :disabled="isDisabled"></td>
               <td><input type="text" v-model="person.score" :disabled="isDisabled"></td>
               <td><input type="text" v-bind:value="person.time | dateFormart" disabled></td>
               <td>
                   <a href="#" @click.prevent="edit">编辑</a>
                   <a href="#" @click.prevent="del(index)">删除</a>
                   <br/>
                   <a href="#" @click.prevent="toggle">更多操作</a>
               </td>
           </tr>
       </table>
   </div>
<script>
    Vue.filter("dateFormart",function (value,fmStr){
        let date = new Date(value);
        let year = date.getFullYear();
        let month = date.getMonth()+1+"";
        let day = date.getDate()+"";
        let hour = date.getHours()+"";
        let minute = date.getMinutes()+"";
        let second = date.getSeconds()+"";
        if(fmStr && fmStr === "yyyy-MM-dd"){
            return `${year}-${month.padStart(2,"0")}-${day.padStart(2,"0")} `;
        }
        return `${year}-${month.padStart(2,"0")}-${day.padStart(2,"0")} ${hour.padStart(2,"0")}:${minute.padStart(2,"0")}:${second.padStart(2,"0")}`;
    });
    let vue =new Vue({
        el: '#app',
        data: {
            isDisabled:true,
            isShow:false,
            persons:[{
                id:1,
                name:"zs",
                score:"99",
                time:Date.now()
            },{
                id:2,
                name:"pikachu",
                score:"99",
                time:Date.now()
            },{
                id:3,
                name:"iu",
                score:"100",
                time:Date.now()
            }],
            person:{
                id:"",
                name:"",
                score:"",
                time:""
            }
        },
        methods:{
           edit(){
                 this.isDisabled=!this.isDisabled;
           },
            toggle(){
               this.isShow=!this.isShow;
            },
            del(index){
               // console.log(index)
                this.persons.splice(index,1);
            },
            add(){
               this.person.time = Date.now();
                this.persons.push(this.person);
                this.person={
                    id:"",
                        name:"",
                        score:"",
                        time:""
                }
            },
            query(){
                let newPersons = this.persons.filter((person)=>{
                    //filter会遍历persons的每一项，变量为person 
                    // 箭头函数会返回分数一样的persons里面的person
                    //然后filter会删去这些返回了的person 赋值给newPersons
                     console.log("person.score:"+person.score)
                    console.log("this.person.score:"+this.person.score)
                    // person.score为data里的数据的分数  this.person.score为form里的
                    if(person.score === this.person.score){
                        // return true;
                        return person;
                    }
                });
                this.persons = newPersons;
            }
        }
    });
</script>
</body>
</html>
```





#### 4.8 过渡动画

**实现用按钮控制div   添加动画**

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<style>
    *{
        margin: 0;
        padding: 0;
    }
    .box{
        width: 200px;
        height: 200px;
        background: red;
    }
    .fade-enter{
        opacity: 0;
    }
    .fade-enter-to{
        opacity: 1;
    }
    .fade-enter-active{
        transition: all 3s;
    }
    .fade-leave{
        opacity: 1;
    }
    .fade-leave-to{
        opacity: 0;
    }
    .fade-leave-active{
        transition: all 3s;
    }

</style>
<body>
   <div id="app">
      <button @click="toggle">我是按钮</button>
       <transition name="fade">
           <div class="box" v-show="isShow"></div>
       </transition>

   </div>
<script>
    let vue =new Vue({
        el: '#app',
        data: {
            isShow:"false",
        },
        methods:{
            toggle(){
             this.isShow=!this.isShow
            }
        }
    });
</script>
</body>
</html>
```



略略略  （以后用到再学） p29-p34



#### 4.9  v-for 导致数据混乱



```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
       <form>
           <input type="text" v-model="name">
           <input type="submit" value="添加" @click.prevent="add">
       </form>

     <ul>
         <li v-for="(person,index) in persons">
             <input type="checkbox">
             <span>{{index}}--- {{person.name}}</span>
         </li>
     </ul>
   </div>
<script>
    let vue =new Vue({
        el: '#app',
        data: {
            persons:[
                {name:"zs"},
                {name:"ls"},
                {name:"ww"}
            ],
            name:""
        },
        methods:{
        add(){
            let newPerson ={name : this.name}
            // this.persons.push(newPerson);
            this.persons.unshift(newPerson);
            this.name="";
        }
        }
    });
</script>
</body>
</html>
```





添加前

![image-20201128142407352](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201128142407352.png)

添加后

![image-20201128142430701](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201128142430701.png)



 再数组前面添加数据后导致选中的数据不一致了，是因为v-for的**就地复用**原则。



![image-20201128142341807](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201128142341807.png)





**解决方法:**  绑定一个独一无二的key



![image-20201128143205900](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201128143205900.png)





```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
       <form>
           <input type="text" v-model="name">
           <input type="submit" value="添加" @click.prevent="add">
       </form>

     <ul>
         <li v-for="(person,index) in persons" :key="person.id">
             <input type="checkbox">
             <span>{{index}}--- {{person.name}}</span>
         </li>
     </ul>
   </div>
<script>
    let vue =new Vue({
        el: '#app',
        data: {
            persons:[
                {name:"zs",id:1},
                {name:"ls",id:2},
                {name:"ww",id:3}
            ],
            name:""
        },
        methods:{
        add(){
            let lastPerson = this.persons[this.persons.length-1];
            let newPerson ={name : this.name,id: lastPerson.id +1}
            // this.persons.push(newPerson);
            this.persons.unshift(newPerson);
            this.name="";
        }
        }
    });
</script>
</body>
</html>
```



#### 4.10 列表动画

增加出现删除的淡入淡出



<transition>会给其中的所有元素默认套上一个<span>

但是这对于li元素是不合适的。

解决方法   tag

```html
<!--     <ul>-->
         <transition-group appear tag="ul" >
         <li v-for="(person,index) in persons" :key="person.id" @click="del(index)">
             <input type="checkbox">
             <span>{{index}}--- {{person.name}}</span>
         </li>
         </transition-group>
<!--     </ul>-->
```



新增两个动画时因为id为最后一个元素的id：3+1=4 所以之后的id都重复了会导致后面的动画没有效果。

解决方法：自己设置一个id

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<style>
    *{
        margin: 0;
        padding: 0;
    }
    .v-enter{
        opacity: 0;
    }
    .v-enter-to{
        opacity: 1;
    }
    .v-enter-active{
        transition: all 3s;
    }
    .v-leave{
        opacity: 1;
    }
    .v-leave-to{
        opacity: 0;
    }
    .v-leave-active{
        transition: all 3s;
    }
</style>
<body>
   <div id="app">
       <form>
           <input type="text" v-model="name">
           <input type="submit" value="添加" @click.prevent="add">
       </form>

<!--     <ul>-->
         <transition-group appear tag="ul" >
         <li v-for="(person,index) in persons" :key="person.id" @click="del(index)">
             <input type="checkbox">
             <span>{{index}}--- {{person.name}}</span>
         </li>
         </transition-group>
<!--     </ul>-->
   </div>
<script>
    let vue =new Vue({
        el: '#app',
        data: {
            persons:[
                {name:"zs",id:1},
                {name:"ls",id:2},
                {name:"ww",id:3}
            ],
            name:"",
            id:3,
        },
        methods:{
        add(){
            this.id++;
            // let lastPerson = this.persons[this.persons.length-1];
            let newPerson ={name : this.name,id: this.id};
            // this.persons.push(newPerson);
            this.persons.unshift(newPerson);
            this.name="";
        },
        del(index){
            this.persons.splice(index,1);
        }
        }
    });
</script>
</body>
</html>
```



#### 4.11 全局组件

大界面拆分为很多小界面 每一个小界面就是一个组件

好处：简化代码 提高复用性

##### 4.11.1 创建组件并使用

> 创建组件步骤
>
> 1.创建组件构造器
>
> 2.注册已经创建好的组件
>
> 3.使用注册好的组件
>
> tips： 在创建组件指定组件的模板的时候，模板只能有一个根元素 放到一个div里

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
<!--     3. 使用注册好的组件-->
       <abc></abc>
   </div>
<script>
    //1.创建组件构造器
    let Profile = Vue.extend({
        template:`
        <div>
            <img src="images/fm.jpg">
            <p>我是描述信息</p>
        </div>
        `
    });

    // 2.注册已经创建好的组件
    // Vue.component( id, [definition] )
    //  第一个参数：指定注册的组件的名称  第二个参数：传入已经创建好的组件构造器
    Vue.component("abc",Profile);

    let vue =new Vue({
        el: '#app',
        data: {
            name: "cqp"
        }
    });
</script>
</body>
</html>
```



##### 4.11.2 全局组件简写

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
       <abc></abc>
   </div>

</body>


<template id="info">
    <div>
        <img src="images/fm.jpg">
        <p>我是描述信息</p>
    </div>
</template>
<script>
    Vue.component("abc", {
        template:`#info`
    });

    let vue =new Vue({
        el: '#app',
        data: {
            name: "cqp"
        }
    });
</script>
</html>
```



##### 4.11.3 局部组件

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
       <abc></abc>
   </div>

</body>


<template id="info">
    <div>
        <img src="images/fm.jpg">
        <p>我是描述信息</p>
    </div>
</template>
<script>
  

    let vue =new Vue({
        el: '#app',
        data: {
            name: "cqp"
        },
        components:{
            "abc":{
                template:`#info`
            }
        }
    });
</script>
</html>
```



##### 4.11.4 组件 data 和 methods

> 组件中使用methods 去自己的组件实例中找methods
>
> 组件中的数据不能直接data这样去定义，用在data里定义为函数的返回值

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">

       <button @click="appFn">我是按钮</button>
       <p>{{appMsg}}</p>
       <abc></abc>

   </div>

</body>


<template id="info">
    <div>
        <img src="images/fm.jpg">
        <button @click="abcFn">我是按钮</button>
        <p>{{abcMsg}}</p>
    </div>
</template>
<script>


    let vue =new Vue({
        el: '#app',
        data: {
            name: "cqp",
            appMsg:"app的信息"
        },
        methods:{
            appFn(){
                alert("appFn")
            }
        },
        components:{
            "abc":{
                template:`#info`,
                methods:{
                    abcFn(){
                        alert("abcFn")
                    }
                },
                // data:{
                //     abcMsg:"app的信息",
                // },
                //注意点: 虽然在自定义的组件中也可以使用data,但是在使用的时候，使用的方式和Vue实例中不太一样
                //       在自定义组件中使用data必须赋值一个函数，然后通过函数的返回值来定义有哪些数据
                data: function (){
                     return{
                         abcMsg: "app的信息",
                     }
                }

            }
        }
    });
</script>
</html>
```

> 组件中的data如果不是通过函数返回的，那么多个组件就会共用一份数据，就会导致数据混乱，如果组件中的data是通过函数返回的，那么每创建一个新的组件，都会调用一次这个方法，将这个方法返回的数据和当前创建的组件绑定在一起，这样就有效的避免了数据混乱。



##### 4.11.5 组件切换

> 对于普通的元素我们可以通过v-if来实现切换
>
> 对于组件我们也可以通过v-if 来实现切换
>
> 组件本身就是一个自定义元素

vue实际控制域的切换

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
<div id="app">
    <button @click="toggle">切换</button>
    <p v-if="isShow">我是首页</p>
    <img v-else src="images/fm.jpg" alt="">
</div>
</body>
<template>
</template>
<script>
    let vue = new Vue({
        el: '#app',
        data: {
            isShow: true
        },
        methods: {
            toggle() {
                this.isShow = !this.isShow;
            }
        }
    });
</script>
</html>
```

组件的切换

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
<div id="app">
    <button @click="toggle">切换</button>
    <home v-if="isShow"></home>
    <photo v-else></photo>
</div>
</body>
<template id="home">
    <div>
        <p>我是首页</p>
    </div>
</template>
<template id="photo">
    <div>
       <img src="images/fm.jpg" alt="">
    </div>
</template>
<script>
    Vue.component("home",{
        template: `#home`,
    });
    Vue.component("photo",{
        template: `#photo`,
    })

    let vue = new Vue({
        el: '#app',
        data: {
            isShow: true
        },
        methods: {
            toggle() {
                this.isShow = !this.isShow;
            }
        }
    });
</script>
</html>
```

tips：可以通过v-if来切换组件，但是有更好的做法就是下面的动态组件。



##### 4.11.6 动态组件

> v-if 切换后无法保存之前的状态
>
> 用动态组件的话 <keep-alive>会保存组件切换前的状态

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
<div id="app">
    <button @click="toggle">切换</button>
    <keep-alive>
        <component v-bind:is="name"></component>
    </keep-alive>

</div>
</body>
<template id="home">
    <div>
        <p>我是首页</p>
        <input type="checkbox">
    </div>
</template>
<template id="photo">
    <div>
       <img src="images/fm.jpg" alt="">
    </div>
</template>
<script>
    Vue.component("home",{
        template: `#home`,
    });
    Vue.component("photo",{
        template: `#photo`,
    })

    let vue = new Vue({
        el: '#app',
        data: {
            name:"home",
        },
        methods: {
            toggle() {
                this.name = this.name === "home" ? "photo" : "home";
            }
        }
    });
</script>
</html>
```

![image-20201128212624279](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201128212624279.png)

**点击切换之后checkbox的内容还是会保存。**



##### 4.11.7 组件动画

>单个组件用<transition>
>
>多个组件用<transition-group>
>
>默认情况下进入动画和离开动画是同时执行的，如果想一个做完再做另一个，需要指定动画模式

![image-20201130134158617](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201130134158617.png)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        .v-enter{
            opacity: 0;
            margin-left: 500px;
        }
        .v-enter-to{
            opacity: 1;
        }
        .v-enter-active{
            transition: all 3s;

        }
        .v-leave{
            opacity: 1;

        }
        .v-leave-to{
            opacity: 0;
        }
        .v-leave-active{
            transition: all 3s;
            margin-left: 500px;

        }
    </style>
</head>
<body>
<div id="app">
    <button @click="toggle">切换</button>
    <transition mode="out-in">

        <keep-alive>
            <component v-bind:is="name"></component>
        </keep-alive>

    </transition>


</div>
</body>
<template id="home">
    <div>
        <p>我是首页</p>
        <input type="checkbox">
    </div>
</template>
<template id="photo">
    <div>
       <img src="images/fm.jpg" alt="">
    </div>
</template>
<script>
    Vue.component("home",{
        template: `#home`,
    });
    Vue.component("photo",{
        template: `#photo`,
    })

    let vue = new Vue({
        el: '#app',
        data: {
            name:"home",
        },
        methods: {
            toggle() {
                this.name = this.name === "home" ? "photo" : "home";
            }
        }
    });
</script>
</html>
```

#### 4.12 父子组件

> 一个组件中又定义了其他的组件
>
> 局部组件就是最简单的父子组件。可以把vue实例看成一个大组件
>
> 子组件永远只能在定义它的父组件中使用

##### 4.12.1 数据传递 props

> 如果子组件想要访问父组件的数据，就必须通过父组件进行传递
>
> 组件中的数据必须通过函数返回
>
> 如何传递:
>
> 1.在父组件中通过v-bind传递数据    v-bind：xxx ="数据"   xxx不要用大写
>
> 2.在子组件中通过 props 接收数据   props:["xxx"]
>
> 

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
      <father></father>

   </div>

</body>
<template id="father">
    <div>
        <p>我是父组件</p>
        <p>{{name}}</p>
        <p>{{age}}</p>
<!--        这里通过 :fathername="name" 将父组件的name通过fathername传递给了子组件-->
        <son :fathername="name" :fatherage="age"></son>
    </div>
</template>
<template id="son">
    <div>
        <p>我是子组件</p>
        <p>这是从父组件传入的数据</p>
<!--        这里通过fathername使用父组件传递过来的数据-->
        <p>{{fathername}}</p>
        <p>{{fatherage}}</p>
    </div>
</template>
<script>
    //父组件
    Vue.component("father",{
        template: `#father`,
        data: function (){
            return {
                name: "cqp",
                age:24,
            }
        },
        //子组件
        components: {
            "son":{
                template:`#son`,
                // 这里通过fathername接收了父组件传递过来的数据
                props: ["fathername","fatherage"],
            }
        }
    });

    let vue =new Vue({
        el: '#app',
        data: {

        },
        methods:{

        },
        components:{
        }
    });
</script>
</html>
```

##### 4.12.2 方法传递

> 与传递数据类似  
>
> 子组件要访问父组件的方法，必须通过父组件传递
>
> 如何传递方法
>
> 1.在父组件中通过 v-on传递方法  v-on：xxx ="要传递的方法"
>
> 2.在子组件中自定义一个方法
>
> 3.在自定义方法中通过 this.$emit('xxx'); 触发传递过来的方法

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
      <father></father>

   </div>

</body>
<template id="father">
    <div>
        <p>我是父组件</p>
        <button @click="say">我是父组件的按钮</button>
<!--        这里通过fathersay将父组件的say方法传递给了子组件-->
        <son @fathersay="say"></son>
    </div>
</template>
<template id="son">
    <div>
        <p>我是子组件</p>
        <button @click="sonFn">我是子组件的按钮</button>
    </div>
</template>
<script>
    //父组件
    Vue.component("father",{
        template: `#father`,
        methods: {
            say(){
                alert("hello!")
            }
        },

        //子组件
        components: {
            "son":{
                template:`#son`,
                /*
                注意点: 和传递数据不同，如果传递的是方法，那么在子组件中不需要接收
                       如果传递的是方法，需要在子组件中自定义一个方法
                       如果传递的是方法，那么在子组件中直接使用自定义的方法即可
                       如果传递的是方法，那么在子组件自定义的方法中通过
                       this.$emit("自定义接收的名称")的方法来触发父组件传递过来的方法
                props:["fathersay"] */
                methods:{
                    sonFn(){
                          this.$emit("fathersay")
                    }
                }
            }
        }
    });

    let vue =new Vue({
        el: '#app',
        data: {
        },
        methods:{

        },
        components:{
        }
    });
</script>
</html>
```





##### 4.12.3 子组件传递数据给父组件

> 在  this.$emit("fathersay","xxx") 中后续参数带上数据即可

```html
<script>
//父组件
Vue.component("father",{
    template: `#father`,
    methods: {
        say(data){
            alert("hello!");
            console.log(data);
        }
    },

    //子组件
    components: {
        "son":{
            template:`#son`,
            /*
            注意点: 和传递数据不同，如果传递的是方法，那么在子组件中不需要接收
                   如果传递的是方法，需要在子组件中自定义一个方法
                   如果传递的是方法，那么在子组件中直接使用自定义的方法即可
                   如果传递的是方法，那么在子组件自定义的方法中通过
                   this.$emit("自定义接收的名称")的方法来触发父组件传递过来的方法
            props:["fathersay"] */
            methods:{
                sonFn(){
                    //  第一个参数：需要调用的函数名称
                    //  后续的参数: 给调用的函数传递的参数
                      this.$emit("fathersay","给父组件的数据")
                }
            }
        }
    }
});
  </script>
```



> 组件命名规范
>
> * 注册组件时  myFather    使用时 my-father
>
> * 传递参数时 parent-name="name"  接收时 props:["parentName"]
>
> * 传递方法时不能用驼峰命名 @parent-say="say"   this.$emit("parent-say")
>
>   



#### 4.13 插槽

> 使用场景： 在使用子组件的时候给子组件动态添加一些内容

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
       <father></father>
   </div>
</body>
<template id="father">
<!--    在使用子组件的时候给子组件动态添加一些内容-->
    <son>
        <div slot="one">我是追加的内容1</div>
        <div slot="one">我是追加的内容11</div>
        <div slot="two">我是追加的内容2</div>
        <div slot="two">我是追加的内容22</div>
    </son>
</template>
<template id="son">
    <div>
        <div>我是头部</div>
<!--        这里的slot标签就是插槽，插槽其实就是一个坑
            有了这个坑，那么以后使用者就可以根据自己的需要来填这个坑
-->
        <slot name="one"></slot>
        <slot name="two"></slot>
        <div>我是尾部</div>
    </div>
</template>
<script>
    // 父组件
    Vue.component("father",{
        template:`#father`,
        components:{
            "son":{
                template: `#son`
            }
        }
    });
    let vue =new Vue({
        el: '#app',
        data: {

        },
        methods:{

        }
    });
</script>
</html>
```

![image-20201130190023387](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201130190023387.png)







> 在vue 2.6.0中，引入了新的统一语法 v-slot  
>
> 简写  <template v-slot:one>   等价于  <template #one>

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
       <father></father>
   </div>
</body>
<template id="father">
<!--    在使用子组件的时候给子组件动态添加一些内容-->
    <son>
          <template v-slot:one>
              <div>我是追加的内容1</div>
              <div>我是追加的内容11</div>
          </template>
        <template v-slot:two>
            <div>我是追加的内容2</div>
            <div>我是追加的内容22</div>
        </template>
    </son>
</template>
<template id="son">
    <div>
        <div>我是头部</div>
        <slot name="one"></slot>
        <slot name="two"></slot>
        <div>我是尾部</div>
    </div>
</template>
<script>
    // 父组件
    Vue.component("father",{
        template:`#father`,
        components:{
            "son":{
                template: `#son`
            }
        }
    });
    let vue =new Vue({
        el: '#app',
        data: {

        },
        methods:{

        }
    });
</script>
</html>
```



> #### 作用域插槽：带数据的插槽
>
> 在父组件填充子组件插槽内容时也能使用子组件的数据
>
> 使用步骤：
>
> ​	1.在slot中通过 v-bind:数据名称="数据名称"方式暴露数据
>
> ​	2.在父组件中通过<template slot-scope="作用域名称">接收数据
>
> 	3. 在父组件的<template></template>中通过  作用域名称,数据名称 方式使用数据
>
> 子组件提供数据，父组件决定如何渲染



**用slot-scope接收**

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
       <father></father>
   </div>
</body>
<template id="father">
    <son>
        <template slot-scope="abc">
            <div>我是填充的内容{{abc.names}}</div>
            <li v-for="(name,index) in abc.names">{{name}}</li>
        </template>
    </son>
</template>
<template id="son">
    <div>
        <div>我是头部{{names}}</div>
        <slot v-bind:names="names">我是默认内容{{names}}</slot>
        <div>我是尾部</div>
    </div>
</template>
<script>
    // 父组件
    Vue.component("father",{
        template:`#father`,
        //子组件
        components:{
            "son":{
                template: `#son`,
                data:function (){
                    return {
                        names:["zs","ls","ww","zl"]
                    }
                }
            }
        }
    });
    let vue =new Vue({
        el: '#app',
        data: {

        },
        methods:{

        }
    });
</script>
</html>
```

![image-20201130192815514](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201130192815514.png)



**用 v-slot 接收数据**

![image-20201130193717339](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201130193717339.png)



**建议还是统一用 v-slot指令**





#### 4.14 数据传递练习



>儿子组件给父亲传递数据     通过方法传递  通过v-on传递方法给子组件
>
>为了实现子组件的互相传值就要借助于父组件 就得先把数据从子组件给父组件
>
>如何实现儿子组件中的数据和父亲中的数据同步
>
>1. 父亲给儿子传递一个方法
>
>2. 在儿子中修改数据
>
>3. 儿子中修改完数据，调用父亲传递过来的方法，并且将修改后的数据传递给父亲的方法
>
>4. 在父亲的方法中保存最新的数据
>
>    再通过v-bind把数据保存然后第二个子组件通过props拿



```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/vue.js"></script>
</head>
<body>
   <div id="app">
      <father></father>
   </div>
</body>
<template id="father">
    <div>
        <son1 @parentchange="change"></son1>
        <son2 :parentnum="num"></son2>
    </div>
</template>
<template id="son1">
    <div>
<!--     需求：在第一个子组件中添加两个按钮和一个输入框，要求通过按钮控制输入框的数据+1和-1-->
        <button @click="add">增加</button>
        <button @click="sub">减少</button>
        <input type="text" :value="count">
    </div>
</template>
<template id="son2">
          <div>
<!--         需求：在第二个子组件中展示第一个子组件中的数据
             注意点：
             1. 如果想要在子组件中使用父组件中的数据，那么必须通过父组件传递
             2. 如果想要再子组件中使用祖先组件中的数据，那么就必须一层一层的传递
             3. 兄弟组件之间不能直接传递数据，如果兄弟组件之间想要传递数据，就必须借助父组件-->

           <p>{{parentnum}}</p>
          </div>
</template>
<script>
    //爸爸组件
    Vue.component("father",{
        template:`#father`,
        data:function (){
          return {
              num:0,
          }
        },
        methods:{
            //用方法来传值
                change(newCount){
                    this.num = newCount;
                }
        },
        //儿子组件
        components:{
            "son1": {
                template: `#son1`,
                data: function (){
                    return {
                        count: 0
                    }
                },
                methods:{
                    add(){
                        this.count = this.count +1;
                        this.$emit("parentchange",this.count);
                    },
                    sub(){
                        this.count = this.count -1;
                        this.$emit("parentchange",this.count);
                    },
                }
            },
            "son2": {
                template:`#son2`,
                props:["parentnum"]
            }
        }
    })


    let vue =new Vue({
        el: '#app',
        data: {

        },
        methods:{

        }
    });
</script>
</html>
```





![image-20201130210126290](/Users/chenqipeng/Library/Application Support/typora-user-images/image-20201130210126290.png)





虽然通过父组件能够实现兄弟组件的数据传递，但是这种方式很复杂，不推荐！

两个问题需要解决：

**1.如果想要再子组件中使用祖先组件中的数据，那么就必须一层一层的传递**

**2.兄弟组件之间不能直接传递数据，如果兄弟组件之间想要传递数据，就必须借助父组件**



**解决方案： vuex**